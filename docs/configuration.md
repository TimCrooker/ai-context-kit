# Configuration

## JSON Schemas

Use schema hints in your context files for editor validation:

- `./.ai/context/schemas/manifest.schema.json`
- `./.ai/context/schemas/scopes.schema.json`

When using the default template, both schema files are generated automatically.

## `.ai/context/manifest.json`

Required:

- `version` (must be `1`)
- `modulesDir`
- `scopesFile`
- `targets`

Optional:

- `$schema`
- `claudeOutput` (default: `CLAUDE.md`)

Rules:

- `targets.root` must exist.
- Every non-root target must be generated by at least one scope mapping.

## `.ai/context/scopes.json`

Required:

- `version` (must be `1`)
- `scopes[]`

Optional:

- `$schema`
- `claudeRulesDir`

Scope keys:

- `id`
- `codexTarget`
- `includes` / `codexIncludes` / `claudeIncludes`
- `codexAgents`
- `claudeMemories`
- `claudeRuleFile`
- `claudePaths`
- `parity`
- `reason`

Constraints:

- `claudeRuleFile` requires `claudePaths` and `claudeRulesDir`.
- `claudeRuleFile` and `claudeMemories` cannot coexist in one scope.
- `codexTarget: root` is invalid.
- Generated output paths must be unique across all scopes.
- By default, parity is enforced between Codex and Claude scoped outputs.
